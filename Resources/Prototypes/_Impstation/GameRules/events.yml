- type: entityTable
  id: LowpopAntagEventsTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - !type:NestedSelector # DV
      tableId: BasicAntagEventsTableDV
    - id: ClosetSkeleton
    - id: DragonSpawn
    - id: KingRatMigration
    - id: NinjaSpawn
    - id: RevenantSpawn
    - id: GoblinStowawaysEvent # imp
    - id: RogueAscendedSpawn # imp

- type: entity
  id: ChangelingAwakening
  parent: BaseGameRule
  components:
  - type: StationEvent
    earliestStart: 35
    minimumPlayers: 30 # roundstart changeling is 15 which seems insane
    weight: 2 # twice as common as zombies
    duration: 1
    occursDuringRoundEnd: false
  - type: ChangelingRule
  - type: AntagObjectives
    objectives:
    - ChangelingStealDNAObjective
    - EscapeIdentityObjective
    - ChangelingSurviveObjective
  - type: AntagSelection
    agentName: changeling-roundend-name
    definitions:
    - prefRoles: [ Changeling ]
      max: 1
      playerRatio: 30
      blacklist:
        components:
        - AntagImmune
      briefing:
        text: changeling-midround-role-greeting
        color: Yellow
        sound: "/Audio/_Goobstation/Ambience/Antag/changeling_start.ogg"
      components:
      - type: Changeling
      mindRoles:
      - MindRoleChangeling

# TODO: Un-ninjafy this, get objectives working
- type: entity
  parent: BaseGameRule
  id: BountyHunterSpawn
  components:
  - type: StationEvent
    weight: 6
    duration: 1
    earliestStart: 30
    reoccurrenceDelay: 20
    minimumPlayers: 20
  - type: AntagLoadProfileRule
  - type: RuleGrids
  - type: LoadMapRule
    gridPath: /Maps/_Impstation/Shuttles/ShuttleEvent/striker.yml # To be replaced with custom shuttle
  - type: AntagObjectives
    objectives:
    - BountyHunterKillRandomAntagObjective
    - BountyHunterSurviveObjective
  - type: AntagSelection
    definitions:
    - spawnerPrototype: SpawnPointGhostBountyHunter # To be replaced with custom spawnpoint
      min: 1
      max: 1
      pickPlayer: false
      startingGear: BountyHunterGear
      roleLoadout:
      - RoleSurvivalEVA
      briefing:
        text: "You are an elite bounty hunter sponsored by an anonymous donor. You've tracked one of your marks to this system, and you're being paid a lot of money to bring them to your shuttle, dead or alive. But ideally alive.\nGood luck."
        color: Orange
        # sound: /Audio/Misc/ninja_greeting.ogg custom sound greeting??
      mindRoles:
      - MindRoleBountyHunter
      components:
      #TODO: Custom bounty hunter names
      - type: RandomMetadata
        nameSegments:
        - names_ninja_title
        - names_ninja
